<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Markdown::Merge::FileAnalysis
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Markdown::Merge::FileAnalysis";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Markdown.html" title="Markdown (module)">Markdown</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Merge.html" title="Markdown::Merge (module)">Merge</a></span></span>
     &raquo; 
    <span class="title">FileAnalysis</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Markdown::Merge::FileAnalysis
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></li>
          
            <li class="next">Markdown::Merge::FileAnalysis</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/markdown/merge/file_analysis.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>File analysis for Markdown files using tree_haver backends.</p>

<p>Extends FileAnalysisBase with backend-agnostic parsing via tree_haver.<br />
Supports both Commonmarker and Markly backends through tree_haver’s<br />
unified API.</p>

<p>Parses Markdown source code and extracts:</p>
<ul>
  <li>Top-level block elements (headings, paragraphs, lists, code blocks, etc.)</li>
  <li>Freeze blocks marked with HTML comments</li>
  <li>Structural signatures for matching elements between files</li>
</ul>

<p>All nodes are wrapped with canonical types via NodeTypeNormalizer,<br />
enabling portable merge rules across backends.</p>

<p>Freeze blocks are marked with HTML comments:<br />
  <!-- markdown-merge:freeze --><br />
  … content to preserve …<br />
  <!-- markdown-merge:unfreeze --></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Basic usage with auto backend</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_analysis'>analysis</span> <span class='op'>=</span> <span class='const'>FileAnalysis</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Markdown::Merge::FileAnalysis#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_markdown_source'>markdown_source</span><span class='rparen'>)</span>
<span class='id identifier rubyid_analysis'>analysis</span><span class='period'>.</span><span class='id identifier rubyid_statements'>statements</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_node'>node</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_merge_type'>merge_type</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>With specific backend</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_analysis'>analysis</span> <span class='op'>=</span> <span class='const'>FileAnalysis</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Markdown::Merge::FileAnalysis#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_markdown_source'>markdown_source</span><span class='comma'>,</span> <span class='label'>backend:</span> <span class='symbol'>:markly</span><span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>With custom freeze token</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_analysis'>analysis</span> <span class='op'>=</span> <span class='const'>FileAnalysis</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Markdown::Merge::FileAnalysis#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>freeze_token:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-merge</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'># Looks for: &lt;!-- my-merge:freeze --&gt; / &lt;!-- my-merge:unfreeze --&gt;</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">Base class</a></span></li>
    
      <li><span class='object_link'><a href="NodeTypeNormalizer.html" title="Markdown::Merge::NodeTypeNormalizer (module)">Type normalization</a></span></li>
    
  </ul>

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULT_FREEZE_TOKEN-constant" class="">DEFAULT_FREEZE_TOKEN =
          <div class="docstring">
  <div class="discussion">
    <p>Default freeze token for identifying freeze blocks</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>markdown-merge</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#backend-instance_method" title="#backend (instance method)">#<strong>backend</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The backend being used (:commonmarker, :markly).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser_options-instance_method" title="#parser_options (instance method)">#<strong>parser_options</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parser-specific options.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="FileAnalysisBase.html#document-instance_method" title="Markdown::Merge::FileAnalysisBase#document (method)">#document</a></span>, <span class='object_link'><a href="FileAnalysisBase.html#errors-instance_method" title="Markdown::Merge::FileAnalysisBase#errors (method)">#errors</a></span>, <span class='object_link'><a href="FileAnalysisBase.html#statements-instance_method" title="Markdown::Merge::FileAnalysisBase#statements (method)">#statements</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#collect_top_level_nodes-instance_method" title="#collect_top_level_nodes (instance method)">#<strong>collect_top_level_nodes</strong>  &#x21d2; Array&lt;Object&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Collect top-level nodes from document, wrapping with canonical types.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compute_parser_signature-instance_method" title="#compute_parser_signature (instance method)">#<strong>compute_parser_signature</strong>(node)  &#x21d2; Array<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Compute signature for a tree_haver node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_text_content-instance_method" title="#extract_text_content (instance method)">#<strong>extract_text_content</strong>(node)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Extract all text content from a node and its children.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fallthrough_node%3F-instance_method" title="#fallthrough_node? (instance method)">#<strong>fallthrough_node?</strong>(value)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Override to detect tree_haver nodes for signature generator fallthrough.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#freeze_node_class-instance_method" title="#freeze_node_class (instance method)">#<strong>freeze_node_class</strong>  &#x21d2; Class </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the FreezeNode class to use.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(source, backend: :auto, freeze_token: DEFAULT_FREEZE_TOKEN, signature_generator: nil, **parser_options)  &#x21d2; FileAnalysis </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initialize file analysis with tree_haver backend.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_sibling-instance_method" title="#next_sibling (instance method)">#<strong>next_sibling</strong>(node)  &#x21d2; Object<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the next sibling of a node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_document-instance_method" title="#parse_document (instance method)">#<strong>parse_document</strong>(source)  &#x21d2; Object<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Parse the source document using tree_haver backend.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser_node%3F-instance_method" title="#parser_node? (instance method)">#<strong>parser_node?</strong>(value)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if value is a tree_haver node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_string_content-instance_method" title="#safe_string_content (instance method)">#<strong>safe_string_content</strong>(node)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Safely get string content from a node.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="FileAnalysisBase.html#compute_node_signature-instance_method" title="Markdown::Merge::FileAnalysisBase#compute_node_signature (method)">#compute_node_signature</a></span>, <span class='object_link'><a href="FileAnalysisBase.html#source_range-instance_method" title="Markdown::Merge::FileAnalysisBase#source_range (method)">#source_range</a></span>, <span class='object_link'><a href="FileAnalysisBase.html#valid%3F-instance_method" title="Markdown::Merge::FileAnalysisBase#valid? (method)">#valid?</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(source, backend: :auto, freeze_token: DEFAULT_FREEZE_TOKEN, signature_generator: nil, **parser_options)  &#x21d2; <tt><span class='object_link'><a href="" title="Markdown::Merge::FileAnalysis (class)">FileAnalysis</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Initialize file analysis with tree_haver backend.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Markdown source code to analyze</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>backend</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:auto</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Backend to use (:commonmarker, :markly, :auto)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>freeze_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_FREEZE_TOKEN</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Token for freeze block markers</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signature_generator</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Custom signature generator</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>parser_options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Backend-specific parser options<br />
For commonmarker: { options: {} }<br />
For markly: { flags: Markly::DEFAULT, extensions: [:table] }</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span>
  <span class='label'>backend:</span> <span class='symbol'>:auto</span><span class='comma'>,</span>
  <span class='label'>freeze_token:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_FREEZE_TOKEN-constant" title="Markdown::Merge::FileAnalysis::DEFAULT_FREEZE_TOKEN (constant)">DEFAULT_FREEZE_TOKEN</a></span></span><span class='comma'>,</span>
  <span class='label'>signature_generator:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='op'>**</span><span class='id identifier rubyid_parser_options'>parser_options</span>
<span class='rparen'>)</span>
  <span class='ivar'>@requested_backend</span> <span class='op'>=</span> <span class='id identifier rubyid_backend'>backend</span>
  <span class='ivar'>@parser_options</span> <span class='op'>=</span> <span class='id identifier rubyid_parser_options'>parser_options</span>

  <span class='comment'># Resolve and initialize the backend
</span>  <span class='ivar'>@backend</span> <span class='op'>=</span> <span class='id identifier rubyid_resolve_backend'>resolve_backend</span><span class='lparen'>(</span><span class='id identifier rubyid_backend'>backend</span><span class='rparen'>)</span>
  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='id identifier rubyid_create_parser'>create_parser</span>

  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>freeze_token:</span> <span class='id identifier rubyid_freeze_token'>freeze_token</span><span class='comma'>,</span> <span class='label'>signature_generator:</span> <span class='id identifier rubyid_signature_generator'>signature_generator</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="backend-instance_method">
  
    #<strong>backend</strong>  &#x21d2; <tt>Symbol</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The backend being used (:commonmarker, :markly).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The backend being used (:commonmarker, :markly)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_backend'>backend</span>
  <span class='ivar'>@backend</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="parser_options-instance_method">
  
    #<strong>parser_options</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Parser-specific options.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Parser-specific options</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_options'>parser_options</span>
  <span class='ivar'>@parser_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="collect_top_level_nodes-instance_method">
  
    #<strong>collect_top_level_nodes</strong>  &#x21d2; <tt>Array&lt;Object&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Collect top-level nodes from document, wrapping with canonical types.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Wrapped nodes</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_collect_top_level_nodes'>collect_top_level_nodes</span>
  <span class='id identifier rubyid_nodes'>nodes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='ivar'>@document</span><span class='period'>.</span><span class='id identifier rubyid_first_child'>first_child</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_child'>child</span>
    <span class='comment'># Wrap each node with its canonical type
</span>    <span class='id identifier rubyid_wrapped'>wrapped</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="NodeTypeNormalizer.html" title="Markdown::Merge::NodeTypeNormalizer (module)">NodeTypeNormalizer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='ivar'>@backend</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_nodes'>nodes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_wrapped'>wrapped</span>
    <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='id identifier rubyid_next_sibling'>next_sibling</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_nodes'>nodes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compute_parser_signature-instance_method">
  
    #<strong>compute_parser_signature</strong>(node)  &#x21d2; <tt>Array</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Compute signature for a tree_haver node.</p>

<p>Uses canonical types from NodeTypeNormalizer for portable signatures.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The node (may be wrapped)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Signature array</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 150</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compute_parser_signature'>compute_parser_signature</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='comment'># Get canonical type from wrapper or normalize raw type
</span>  <span class='id identifier rubyid_canonical_type'>canonical_type</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_typed_node?'>typed_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
    <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_merge_type_for'>merge_type_for</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="NodeTypeNormalizer.html" title="Markdown::Merge::NodeTypeNormalizer (module)">NodeTypeNormalizer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_canonical_type'>canonical_type</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='ivar'>@backend</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Unwrap to access underlying node methods
</span>  <span class='id identifier rubyid_raw_node'>raw_node</span> <span class='op'>=</span> <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_unwrap'>unwrap</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_canonical_type'>canonical_type</span>
  <span class='kw'>when</span> <span class='symbol'>:heading</span>
    <span class='comment'># Content-based: Match headings by level and text content
</span>    <span class='lbracket'>[</span><span class='symbol'>:heading</span><span class='comma'>,</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_header_level'>header_level</span><span class='comma'>,</span> <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:paragraph</span>
    <span class='comment'># Content-based: Match paragraphs by content hash (first 32 chars of digest)
</span>    <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:paragraph</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_text'>text</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>32</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:code_block</span>
    <span class='comment'># Content-based: Match code blocks by fence info and content hash
</span>    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_string_content'>safe_string_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fence_info'>fence_info</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:fence_info</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_fence_info'>fence_info</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='lbracket'>[</span><span class='symbol'>:code_block</span><span class='comma'>,</span> <span class='id identifier rubyid_fence_info'>fence_info</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:list</span>
    <span class='comment'># Structure-based: Match lists by type and item count (content may differ)
</span>    <span class='id identifier rubyid_list_type'>list_type</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:list_type</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_list_type'>list_type</span> <span class='op'>:</span> <span class='kw'>nil</span>
    <span class='lbracket'>[</span><span class='symbol'>:list</span><span class='comma'>,</span> <span class='id identifier rubyid_list_type'>list_type</span><span class='comma'>,</span> <span class='id identifier rubyid_count_children'>count_children</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:block_quote</span>
    <span class='comment'># Content-based: Match block quotes by content hash
</span>    <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:block_quote</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_text'>text</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:thematic_break</span>
    <span class='comment'># Structure-based: All thematic breaks are equivalent
</span>    <span class='lbracket'>[</span><span class='symbol'>:thematic_break</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:html_block</span>
    <span class='comment'># Content-based: Match HTML blocks by content hash
</span>    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_string_content'>safe_string_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:html_block</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:table</span>
    <span class='comment'># Content-based: Match tables by structure and header content
</span>    <span class='id identifier rubyid_header_content'>header_content</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_table_header_content'>extract_table_header_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:table</span><span class='comma'>,</span> <span class='id identifier rubyid_count_children'>count_children</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_header_content'>header_content</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:footnote_definition</span>
    <span class='comment'># Name/label-based: Match footnotes by name or label
</span>    <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>:</span> <span class='id identifier rubyid_safe_string_content'>safe_string_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:footnote_definition</span><span class='comma'>,</span> <span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:custom_block</span>
    <span class='comment'># Content-based: Match custom blocks by content hash
</span>    <span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_node'>raw_node</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='symbol'>:custom_block</span><span class='comma'>,</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id identifier rubyid_text'>text</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>16</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='comment'># Unknown type - use canonical type and position
</span>    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_node'>raw_node</span><span class='period'>.</span><span class='id identifier rubyid_source_position'>source_position</span>
    <span class='lbracket'>[</span><span class='symbol'>:unknown</span><span class='comma'>,</span> <span class='id identifier rubyid_canonical_type'>canonical_type</span><span class='comma'>,</span> <span class='id identifier rubyid_pos'>pos</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='symbol'>:start_line</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="extract_text_content-instance_method">
  
    #<strong>extract_text_content</strong>(node)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Extract all text content from a node and its children.</p>

<p>Override for tree_haver nodes which don’t have a <code>walk</code> method.<br />
Uses recursive traversal via <code>children</code> instead.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The node</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Concatenated text content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text_parts'>text_parts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_collect_text_recursive'>collect_text_recursive</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='id identifier rubyid_text_parts'>text_parts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text_parts'>text_parts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fallthrough_node?-instance_method">
  
    #<strong>fallthrough_node?</strong>(value)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Override to detect tree_haver nodes for signature generator fallthrough</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The value to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if this is a fallthrough node</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 137</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fallthrough_node?'>fallthrough_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_typed_node?'>typed_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>FreezeNodeBase</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='id identifier rubyid_parser_node?'>parser_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="freeze_node_class-instance_method">
  
    #<strong>freeze_node_class</strong>  &#x21d2; <tt>Class</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the FreezeNode class to use.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Markdown::Merge::FreezeNode</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 118</span>

<span class='kw'>def</span> <span class='id identifier rubyid_freeze_node_class'>freeze_node_class</span>
  <span class='const'><span class='object_link'><a href="FreezeNode.html" title="Markdown::Merge::FreezeNode (class)">FreezeNode</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next_sibling-instance_method">
  
    #<strong>next_sibling</strong>(node)  &#x21d2; <tt>Object</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the next sibling of a node.</p>

<p>Handles differences between backends:</p>
<ul>
  <li>Commonmarker: node.next_sibling</li>
  <li>Markly: node.next</li>
</ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Current node</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Next sibling or nil</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_next_sibling'>next_sibling</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='comment'># tree_haver normalizes this, but handle both patterns for safety
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:next_sibling</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_next_sibling'>next_sibling</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:next</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_document-instance_method">
  
    #<strong>parse_document</strong>(source)  &#x21d2; <tt>Object</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Parse the source document using tree_haver backend.</p>

<p>Error handling follows the same pattern as other *-merge gems:</p>
<ul>
  <li>TreeHaver::Error (which inherits from Exception, not StandardError) is caught</li>
  <li>TreeHaver::NotAvailable is a subclass of TreeHaver::Error, so it’s also caught</li>
  <li>When an error occurs, the error is stored in @errors and nil is returned</li>
  <li>SmartMergerBase#parse_and_analyze checks valid? and raises the appropriate parse error</li>
</ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Markdown source to parse</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Root document node from tree_haver, or nil on error</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_document'>parse_document</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tree'>tree</span> <span class='op'>=</span> <span class='ivar'>@parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_root_node'>root_node</span>
<span class='kw'>rescue</span> <span class='const'>TreeHaver</span><span class='op'>::</span><span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='comment'># TreeHaver::Error inherits from Exception, not StandardError.
</span>  <span class='comment'># This also catches TreeHaver::NotAvailable (subclass of Error).
</span>  <span class='ivar'>@errors</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parser_node?-instance_method">
  
    #<strong>parser_node?</strong>(value)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if value is a tree_haver node.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if this is a parser node</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_node?'>parser_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='comment'># Check for tree_haver node or wrapped node
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:type</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:source_position</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_typed_node?'>typed_node?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>

  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="safe_string_content-instance_method">
  
    #<strong>safe_string_content</strong>(node)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Safely get string content from a node.</p>

<p>Override for tree_haver nodes which use <code>text</code> instead of <code>string_content</code>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The node</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>String content or empty string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/file_analysis.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_safe_string_content'>safe_string_content</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:string_content</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_string_content'>string_content</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:text</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='const'>NoMethodError</span>
  <span class='id identifier rubyid_extract_text_content'>extract_text_content</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jan 19 14:34:03 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.0).
</div>

    </div>
  </body>
</html>