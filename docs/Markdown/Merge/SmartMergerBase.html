<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Markdown::Merge::SmartMergerBase
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Markdown::Merge::SmartMergerBase";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Markdown.html" title="Markdown (module)">Markdown</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Merge.html" title="Markdown::Merge (module)">Merge</a></span></span>
     &raquo; 
    <span class="title">SmartMergerBase</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Markdown::Merge::SmartMergerBase
  <span class="abstract note title">Abstract</span>
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Markdown::Merge::SmartMergerBase</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/markdown/merge/smart_merger_base.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>Subclass and implement parser-specific methods</p>
</div>
</div>
<p>Base class for smart Markdown file merging.</p>

<p>Orchestrates the smart merge process for Markdown files using<br />
FileAnalysisBase, FileAligner, ConflictResolver, and MergeResult to<br />
merge two Markdown files intelligently. Freeze blocks marked with<br />
HTML comments are preserved exactly as-is.</p>

<p>Subclasses must implement:</p>
<ul>
  <li>#create_file_analysis(content, **options) - Create parser-specific FileAnalysis</li>
  <li>#node_to_source(node, analysis) - Convert a node to source text</li>
</ul>

<p>SmartMergerBase provides flexible configuration for different merge scenarios:</p>
<ul>
  <li>Preserve destination customizations (default)</li>
  <li>Apply template updates</li>
  <li>Add new sections from template</li>
  <li>Inner-merge fenced code blocks using language-specific mergers (optional)</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Subclass implementation</p>
</div></h5>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'><span class='object_link'><a href="SmartMerger.html" title="Markdown::Merge::SmartMerger (class)">SmartMerger</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../../Markdown.html" title="Markdown (module)">Markdown</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Merge.html" title="Markdown::Merge (module)">Merge</a></span></span><span class='op'>::</span><span class='const'>SmartMergerBase</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_create_file_analysis'>create_file_analysis</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="FileAnalysis.html" title="Markdown::Merge::FileAnalysis (class)">FileAnalysis</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FileAnalysis.html#initialize-instance_method" title="Markdown::Merge::FileAnalysis#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_node_to_source'>node_to_source</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='comma'>,</span> <span class='id identifier rubyid_analysis'>analysis</span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_node'>node</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="FreezeNode.html" title="Markdown::Merge::FreezeNode (class)">FreezeNode</a></span></span>
      <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_full_text'>full_text</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_analysis'>analysis</span><span class='period'>.</span><span class='id identifier rubyid_source_range'>source_range</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_start_line'>start_line</span><span class='comma'>,</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_end_line'>end_line</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></li>
    
      <li><span class='object_link'><a href="FileAligner.html" title="Markdown::Merge::FileAligner (class)">FileAligner</a></span></li>
    
      <li><span class='object_link'><a href="ConflictResolver.html" title="Markdown::Merge::ConflictResolver (class)">ConflictResolver</a></span></li>
    
      <li><span class='object_link'><a href="MergeResult.html" title="Markdown::Merge::MergeResult (class)">MergeResult</a></span></li>
    
  </ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="SmartMerger.html" title="Markdown::Merge::SmartMerger (class)">SmartMerger</a></span></p>
</div>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#aligner-instance_method" title="#aligner (instance method)">#<strong>aligner</strong>  &#x21d2; FileAligner </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Aligner for finding matches and differences.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#code_block_merger-instance_method" title="#code_block_merger (instance method)">#<strong>code_block_merger</strong>  &#x21d2; CodeBlockMerger<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merger for fenced code blocks.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#dest_analysis-instance_method" title="#dest_analysis (instance method)">#<strong>dest_analysis</strong>  &#x21d2; FileAnalysisBase </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Analysis of the destination file.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#node_typing-instance_method" title="#node_typing (instance method)">#<strong>node_typing</strong>  &#x21d2; Hash{Symbol,String =&gt; #call}<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Node typing configuration.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#resolver-instance_method" title="#resolver (instance method)">#<strong>resolver</strong>  &#x21d2; ConflictResolver </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Resolver for handling conflicting content.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#template_analysis-instance_method" title="#template_analysis (instance method)">#<strong>template_analysis</strong>  &#x21d2; FileAnalysisBase </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Analysis of the template file.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_file_analysis-instance_method" title="#create_file_analysis (instance method)">#<strong>create_file_analysis</strong>(content, **options)  &#x21d2; FileAnalysisBase </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a FileAnalysis instance for the given content.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destination_parse_error_class-instance_method" title="#destination_parse_error_class (instance method)">#<strong>destination_parse_error_class</strong>  &#x21d2; Class </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the DestinationParseError class to use.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(template_content, dest_content, signature_generator: nil, preference: :destination, add_template_only_nodes: false, inner_merge_code_blocks: false, freeze_token: FileAnalysisBase::DEFAULT_FREEZE_TOKEN, match_refiner: nil, node_typing: nil, normalize_whitespace: false, rehydrate_link_references: false, **parser_options)  &#x21d2; SmartMergerBase </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new SmartMerger for intelligent Markdown file merging.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge-instance_method" title="#merge (instance method)">#<strong>merge</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform the merge operation and return the merged content as a string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_result-instance_method" title="#merge_result (instance method)">#<strong>merge_result</strong>  &#x21d2; MergeResult </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform the merge operation and return the full MergeResult object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stats-instance_method" title="#stats (instance method)">#<strong>stats</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get merge statistics (convenience method).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template_parse_error_class-instance_method" title="#template_parse_error_class (instance method)">#<strong>template_parse_error_class</strong>  &#x21d2; Class </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the TemplateParseError class to use.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(template_content, dest_content, signature_generator: nil, preference: :destination, add_template_only_nodes: false, inner_merge_code_blocks: false, freeze_token: FileAnalysisBase::DEFAULT_FREEZE_TOKEN, match_refiner: nil, node_typing: nil, normalize_whitespace: false, rehydrate_link_references: false, **parser_options)  &#x21d2; <tt><span class='object_link'><a href="" title="Markdown::Merge::SmartMergerBase (class)">SmartMergerBase</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new SmartMerger for intelligent Markdown file merging.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>template_content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Template Markdown source code</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Destination Markdown source code</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signature_generator</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional proc to generate custom node signatures.<br />
The proc receives a node and should return one of:</p>
<ul>
  <li>An array representing the node’s signature</li>
  <li><code>nil</code> to indicate the node should have no signature</li>
  <li>The original node to fall through to default signature computation</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>preference</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:destination</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Controls which version to use when nodes<br />
have matching signatures but different content:</p>
<ul>
  <li><code>:destination</code> (default) - Use destination version (preserves customizations)</li>
  <li><code>:template</code> - Use template version (applies updates)</li>
  <li>Hash for per-type preferences: <code>{ default: :destination, gem_table: :template }</code></li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>add_template_only_nodes</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>#call</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Controls whether to add nodes that only<br />
exist in template:</p>
<ul>
  <li><code>false</code> (default) - Skip template-only nodes</li>
  <li><code>true</code> - Add all template-only nodes to result</li>
  <li>Callable (Proc/Lambda) - Called with (node, entry) for each template-only node.<br />
Return truthy to add the node, falsey to skip it.<br />
@example Filter to only add gem family link refs<br />
  add_template_only_nodes: -&gt;(node, entry) {<br />
    sig = entry[:signature]<br />
    sig.is_a?(Array) &amp;&amp; sig.first == :gem_family<br />
  }</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>inner_merge_code_blocks</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt><span class='object_link'><a href="CodeBlockMerger.html" title="Markdown::Merge::CodeBlockMerger (class)">CodeBlockMerger</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Controls inner-merge for<br />
fenced code blocks:</p>
<ul>
  <li><code>true</code> - Enable inner-merge using default CodeBlockMerger</li>
  <li><code>false</code> (default) - Disable inner-merge (use standard conflict resolution)</li>
  <li><code>CodeBlockMerger</code> instance - Use custom CodeBlockMerger</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>freeze_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>FileAnalysisBase::DEFAULT_FREEZE_TOKEN</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Token to use for freeze block markers.<br />
Default: “markdown-merge”</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>match_refiner</span>
      
      
        <span class='type'>(<tt>#call</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional match refiner for fuzzy matching of<br />
unmatched nodes. Default: nil (fuzzy matching disabled).<br />
Set to TableMatchRefiner.new to enable fuzzy table matching.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>node_typing</span>
      
      
        <span class='type'>(<tt>Hash{Symbol,String =&gt; #call}</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Node typing configuration<br />
for per-node-type merge preferences. Maps node type names to callables that<br />
can wrap nodes with custom merge_types for use with Hash-based preference.<br />
@example<br />
  node_typing = {<br />
    table: -&gt;(node) {<br />
      text = node.to_plaintext<br />
      if text.include?(“tree_haver”)<br />
        Ast::Merge::NodeTyping.with_merge_type(node, :gem_family_table)<br />
      else<br />
        node<br />
      end<br />
    }<br />
  }<br />
  merger = SmartMerger.new(template, dest,<br />
    node_typing: node_typing,<br />
    preference: { default: :destination, gem_family_table: :template })</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>normalize_whitespace</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whitespace normalization mode:</p>
<ul>
  <li><code>false</code> (default) - No normalization</li>
  <li><code>true</code> or <code>:basic</code> - Collapse excessive blank lines (3+ → 2)</li>
  <li><code>:link_refs</code> - Basic + remove blank lines between consecutive link reference definitions</li>
  <li><code>:strict</code> - All normalizations (same as :link_refs currently)</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rehydrate_link_references</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If true, convert inline links/images<br />
to reference-style when a matching link reference definition exists. Default: false</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>parser_options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional parser-specific options</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TemplateParseError.html" title="Markdown::Merge::TemplateParseError (class)">TemplateParseError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If template has syntax errors</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DestinationParseError.html" title="Markdown::Merge::DestinationParseError (class)">DestinationParseError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If destination has syntax errors</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_template_content'>template_content</span><span class='comma'>,</span>
  <span class='id identifier rubyid_dest_content'>dest_content</span><span class='comma'>,</span>
  <span class='label'>signature_generator:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>preference:</span> <span class='symbol'>:destination</span><span class='comma'>,</span>
  <span class='label'>add_template_only_nodes:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>inner_merge_code_blocks:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>freeze_token:</span> <span class='const'><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="FileAnalysisBase.html#DEFAULT_FREEZE_TOKEN-constant" title="Markdown::Merge::FileAnalysisBase::DEFAULT_FREEZE_TOKEN (constant)">DEFAULT_FREEZE_TOKEN</a></span></span><span class='comma'>,</span>
  <span class='label'>match_refiner:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>node_typing:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>normalize_whitespace:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>rehydrate_link_references:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='op'>**</span><span class='id identifier rubyid_parser_options'>parser_options</span>
<span class='rparen'>)</span>
  <span class='ivar'>@preference</span> <span class='op'>=</span> <span class='id identifier rubyid_preference'>preference</span>
  <span class='ivar'>@add_template_only_nodes</span> <span class='op'>=</span> <span class='id identifier rubyid_add_template_only_nodes'>add_template_only_nodes</span>
  <span class='ivar'>@match_refiner</span> <span class='op'>=</span> <span class='id identifier rubyid_match_refiner'>match_refiner</span>
  <span class='ivar'>@node_typing</span> <span class='op'>=</span> <span class='id identifier rubyid_node_typing'>node_typing</span>
  <span class='ivar'>@normalize_whitespace</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_whitespace'>normalize_whitespace</span>
  <span class='ivar'>@rehydrate_link_references</span> <span class='op'>=</span> <span class='id identifier rubyid_rehydrate_link_references'>rehydrate_link_references</span>

  <span class='comment'># Validate node_typing if provided
</span>  <span class='const'>Ast</span><span class='op'>::</span><span class='const'>Merge</span><span class='op'>::</span><span class='const'>NodeTyping</span><span class='period'>.</span><span class='id identifier rubyid_validate!'>validate!</span><span class='lparen'>(</span><span class='id identifier rubyid_node_typing'>node_typing</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_node_typing'>node_typing</span>

  <span class='comment'># Set up code block merger
</span>  <span class='ivar'>@code_block_merger</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_inner_merge_code_blocks'>inner_merge_code_blocks</span>
  <span class='kw'>when</span> <span class='kw'>true</span>
    <span class='const'><span class='object_link'><a href="CodeBlockMerger.html" title="Markdown::Merge::CodeBlockMerger (class)">CodeBlockMerger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CodeBlockMerger.html#initialize-instance_method" title="Markdown::Merge::CodeBlockMerger#initialize (method)">new</a></span></span>
  <span class='kw'>when</span> <span class='kw'>false</span>
    <span class='kw'>nil</span>
  <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="CodeBlockMerger.html" title="Markdown::Merge::CodeBlockMerger (class)">CodeBlockMerger</a></span></span>
    <span class='id identifier rubyid_inner_merge_code_blocks'>inner_merge_code_blocks</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inner_merge_code_blocks must be true, false, or a CodeBlockMerger instance</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Parse template
</span>  <span class='kw'>begin</span>
    <span class='ivar'>@template_analysis</span> <span class='op'>=</span> <span class='id identifier rubyid_create_file_analysis'>create_file_analysis</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_template_content'>template_content</span><span class='comma'>,</span>
      <span class='label'>freeze_token:</span> <span class='id identifier rubyid_freeze_token'>freeze_token</span><span class='comma'>,</span>
      <span class='label'>signature_generator:</span> <span class='id identifier rubyid_signature_generator'>signature_generator</span><span class='comma'>,</span>
      <span class='op'>**</span><span class='id identifier rubyid_parser_options'>parser_options</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_template_parse_error_class'>template_parse_error_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>errors:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_e'>e</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Parse destination
</span>  <span class='kw'>begin</span>
    <span class='ivar'>@dest_analysis</span> <span class='op'>=</span> <span class='id identifier rubyid_create_file_analysis'>create_file_analysis</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_dest_content'>dest_content</span><span class='comma'>,</span>
      <span class='label'>freeze_token:</span> <span class='id identifier rubyid_freeze_token'>freeze_token</span><span class='comma'>,</span>
      <span class='label'>signature_generator:</span> <span class='id identifier rubyid_signature_generator'>signature_generator</span><span class='comma'>,</span>
      <span class='op'>**</span><span class='id identifier rubyid_parser_options'>parser_options</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_destination_parse_error_class'>destination_parse_error_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>errors:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_e'>e</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@aligner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="FileAligner.html" title="Markdown::Merge::FileAligner (class)">FileAligner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="FileAligner.html#initialize-instance_method" title="Markdown::Merge::FileAligner#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@template_analysis</span><span class='comma'>,</span> <span class='ivar'>@dest_analysis</span><span class='comma'>,</span> <span class='label'>match_refiner:</span> <span class='ivar'>@match_refiner</span><span class='rparen'>)</span>
  <span class='ivar'>@resolver</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ConflictResolver.html" title="Markdown::Merge::ConflictResolver (class)">ConflictResolver</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ConflictResolver.html#initialize-instance_method" title="Markdown::Merge::ConflictResolver#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='label'>preference:</span> <span class='ivar'>@preference</span><span class='comma'>,</span>
    <span class='label'>template_analysis:</span> <span class='ivar'>@template_analysis</span><span class='comma'>,</span>
    <span class='label'>dest_analysis:</span> <span class='ivar'>@dest_analysis</span><span class='comma'>,</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="aligner-instance_method">
  
    #<strong>aligner</strong>  &#x21d2; <tt><span class='object_link'><a href="FileAligner.html" title="Markdown::Merge::FileAligner (class)">FileAligner</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Aligner for finding matches and differences.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FileAligner.html" title="Markdown::Merge::FileAligner (class)">FileAligner</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Aligner for finding matches and differences</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_aligner'>aligner</span>
  <span class='ivar'>@aligner</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="code_block_merger-instance_method">
  
    #<strong>code_block_merger</strong>  &#x21d2; <tt><span class='object_link'><a href="CodeBlockMerger.html" title="Markdown::Merge::CodeBlockMerger (class)">CodeBlockMerger</a></span></tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Merger for fenced code blocks.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CodeBlockMerger.html" title="Markdown::Merge::CodeBlockMerger (class)">CodeBlockMerger</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Merger for fenced code blocks</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_code_block_merger'>code_block_merger</span>
  <span class='ivar'>@code_block_merger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="dest_analysis-instance_method">
  
    #<strong>dest_analysis</strong>  &#x21d2; <tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Analysis of the destination file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Analysis of the destination file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dest_analysis'>dest_analysis</span>
  <span class='ivar'>@dest_analysis</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="node_typing-instance_method">
  
    #<strong>node_typing</strong>  &#x21d2; <tt>Hash{Symbol,String =&gt; #call}</tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Node typing configuration.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol,String =&gt; #call}</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Node typing configuration</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_node_typing'>node_typing</span>
  <span class='ivar'>@node_typing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="resolver-instance_method">
  
    #<strong>resolver</strong>  &#x21d2; <tt><span class='object_link'><a href="ConflictResolver.html" title="Markdown::Merge::ConflictResolver (class)">ConflictResolver</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Resolver for handling conflicting content.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ConflictResolver.html" title="Markdown::Merge::ConflictResolver (class)">ConflictResolver</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Resolver for handling conflicting content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resolver'>resolver</span>
  <span class='ivar'>@resolver</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="template_analysis-instance_method">
  
    #<strong>template_analysis</strong>  &#x21d2; <tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Analysis of the template file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Analysis of the template file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template_analysis'>template_analysis</span>
  <span class='ivar'>@template_analysis</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_file_analysis-instance_method">
  
    #<strong>create_file_analysis</strong>(content, **options)  &#x21d2; <tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'><p>Subclasses must implement this method</p>
</div>
</div>
<p>Create a FileAnalysis instance for the given content.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Markdown content to analyze</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Analysis options</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FileAnalysisBase.html" title="Markdown::Merge::FileAnalysisBase (class)">FileAnalysisBase</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>File analysis instance</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_file_analysis'>create_file_analysis</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> must implement #create_file_analysis</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destination_parse_error_class-instance_method">
  
    #<strong>destination_parse_error_class</strong>  &#x21d2; <tt>Class</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the DestinationParseError class to use.</p>

<p>Subclasses should override to return their parser-specific error class.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>DestinationParseError class</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destination_parse_error_class'>destination_parse_error_class</span>
  <span class='const'><span class='object_link'><a href="DestinationParseError.html" title="Markdown::Merge::DestinationParseError (class)">DestinationParseError</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge-instance_method">
  
    #<strong>merge</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform the merge operation and return the merged content as a string.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The merged Markdown content</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge'>merge</span>
  <span class='id identifier rubyid_merge_result'>merge_result</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge_result-instance_method">
  
    #<strong>merge_result</strong>  &#x21d2; <tt><span class='object_link'><a href="MergeResult.html" title="Markdown::Merge::MergeResult (class)">MergeResult</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform the merge operation and return the full MergeResult object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MergeResult.html" title="Markdown::Merge::MergeResult (class)">MergeResult</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The merge result containing merged content and metadata</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_result'>merge_result</span>
  <span class='kw'>return</span> <span class='ivar'>@merge_result</span> <span class='kw'>if</span> <span class='ivar'>@merge_result</span>

  <span class='ivar'>@merge_result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DebugLogger.html" title="Markdown::Merge::DebugLogger (module)">DebugLogger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SmartMergerBase#merge</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_alignment'>alignment</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DebugLogger.html" title="Markdown::Merge::DebugLogger (module)">DebugLogger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SmartMergerBase#align</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='ivar'>@aligner</span><span class='period'>.</span><span class='id identifier rubyid_align'>align</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="DebugLogger.html" title="Markdown::Merge::DebugLogger (module)">DebugLogger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Alignment complete</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span>
      <span class='label'>total_entries:</span> <span class='id identifier rubyid_alignment'>alignment</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span>
      <span class='label'>matches:</span> <span class='id identifier rubyid_alignment'>alignment</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:match</span> <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='label'>template_only:</span> <span class='id identifier rubyid_alignment'>alignment</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:template_only</span> <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='label'>dest_only:</span> <span class='id identifier rubyid_alignment'>alignment</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:dest_only</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>

    <span class='comment'># Process alignment using OutputBuilder
</span>    <span class='id identifier rubyid_builder'>builder</span><span class='comma'>,</span> <span class='id identifier rubyid_stats'>stats</span><span class='comma'>,</span> <span class='id identifier rubyid_frozen_blocks'>frozen_blocks</span><span class='comma'>,</span> <span class='id identifier rubyid_conflicts'>conflicts</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DebugLogger.html" title="Markdown::Merge::DebugLogger (module)">DebugLogger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SmartMergerBase#process</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_process_alignment'>process_alignment</span><span class='lparen'>(</span><span class='id identifier rubyid_alignment'>alignment</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Get content from OutputBuilder
</span>    <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

    <span class='comment'># Collect problems from post-processing
</span>    <span class='id identifier rubyid_problems'>problems</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DocumentProblems.html" title="Markdown::Merge::DocumentProblems (class)">DocumentProblems</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DocumentProblems.html#initialize-instance_method" title="Markdown::Merge::DocumentProblems#initialize (method)">new</a></span></span>

    <span class='comment'># Apply post-processing transformations
</span>    <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_problems'>problems</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_post_processing'>apply_post_processing</span><span class='lparen'>(</span><span class='id identifier rubyid_content'>content</span><span class='comma'>,</span> <span class='id identifier rubyid_problems'>problems</span><span class='rparen'>)</span>

    <span class='comment'># Get final content from OutputBuilder
</span>    <span class='const'><span class='object_link'><a href="MergeResult.html" title="Markdown::Merge::MergeResult (class)">MergeResult</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MergeResult.html#initialize-instance_method" title="Markdown::Merge::MergeResult#initialize (method)">new</a></span></span><span class='lparen'>(</span>
      <span class='label'>content:</span> <span class='id identifier rubyid_content'>content</span><span class='comma'>,</span>
      <span class='label'>conflicts:</span> <span class='id identifier rubyid_conflicts'>conflicts</span><span class='comma'>,</span>
      <span class='label'>frozen_blocks:</span> <span class='id identifier rubyid_frozen_blocks'>frozen_blocks</span><span class='comma'>,</span>
      <span class='label'>stats:</span> <span class='id identifier rubyid_stats'>stats</span><span class='comma'>,</span>
      <span class='label'>problems:</span> <span class='id identifier rubyid_problems'>problems</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stats-instance_method">
  
    #<strong>stats</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get merge statistics (convenience method).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Statistics from the merge result</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stats'>stats</span>
  <span class='id identifier rubyid_merge_result'>merge_result</span><span class='period'>.</span><span class='id identifier rubyid_stats'>stats</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template_parse_error_class-instance_method">
  
    #<strong>template_parse_error_class</strong>  &#x21d2; <tt>Class</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the TemplateParseError class to use.</p>

<p>Subclasses should override to return their parser-specific error class.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>TemplateParseError class</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/markdown/merge/smart_merger_base.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template_parse_error_class'>template_parse_error_class</span>
  <span class='const'><span class='object_link'><a href="TemplateParseError.html" title="Markdown::Merge::TemplateParseError (class)">TemplateParseError</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan 20 00:06:08 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.1).
</div>

    </div>
  </body>
</html>